<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible"
		  content="IE=edge">
	<meta name="viewport"
		  content="width=device-width, initial-scale=1.0">

	<title>Socket.IO</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
		  rel="stylesheet">

	<script src="https://cdn.socket.io/4.4.0/socket.io.min.js"></script>
	<style>
		body {
			background: #333;
		}

		form {
			padding: 20px;
			position: fixed;
			bottom: 0;
			width: 100%;
			padding-right: 50px;
		}

		#messages {
			list-style-type: none;
			margin: 40px auto 0 auto;
			padding: 0;
			width: 500px;
			height: 100px;
			border: 1px solid #ccc;
			overflow-y: auto;
			background: #222;
		}

		#messages li {
			padding: 5px 10px;
		}

		#messages li:nth-child(odd) {
			background: #bbb;
		}

		#messages li:nth-child(even) {
			background: #ccc;
		}

		#message {
			background: #999;
		}

		button {
			margin-left: 10px;
		}

		.quote {
			color: rgb(206, 206, 115);
			width: 500px;
			margin: 5px auto 5px auto;
			font-style: italic;
			font-size: .9rem;
		}
	</style>
</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<ul id="messages">
				<li>Welcome, start chatting.</li>
			</ul>
			<div class="quote">Testing Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ducimus veniam quas repellat rem est sequi dolore neque accusantium nulla voluptas velit sint iste, soluta, odio dolorem, eligendi dolores voluptate quibusdam.</div>
		</div>
		<div class="row">
			<div class="col-lg-6">
				<form action="">
					<div class="input-group">
						<input id="message"
							   autocomplete="off"
							   type="text"
							   class="form-control">
						<span class="input-group-btn">
							<button class="btn btn-secondary"
									type="submit">Send</button>
						</span>
					</div>
				</form>
			</div>
		</div>
	</div>
	<script>
		const socket = io();
		const formElem = document.querySelector('form');
		const messageElem = document.querySelector('#message');
		const messagesElem = document.querySelector('#messages');

		formElem.onsubmit = (e) => {
			e.preventDefault();
			const message = messageElem.value;
			socket.emit('message', message);
			messageElem.value = '';
		};

		socket.on('message', (data) => {
			const li = document.createElement('li');
			li.appendChild(document.createTextNode(data));
			messagesElem.appendChild(li);
			// window.scrollTo(0,document.body.scrollHeight);
			messagesElem.scrollTop = messagesElem.scrollHeight;
		});
	</script>
</body>

</html>